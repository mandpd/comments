---
output: github_document
---

[![Travis build status](https://travis-ci.com/mandpd/comments.svg?branch=master)](https://travis-ci.org/mandpd/comments)
[![AppVeyor build status](https://ci.appveyor.com/api/projects/status/github/mandpd/comments?branch=master&svg=true)](https://ci.appveyor.com/project/mandpd/comments)
[![Coverage status](https://codecov.io/gh/mandpd/comments/branch/master/graph/badge.svg)](https://codecov.io/github/mandpd/comments?branch=master)

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```
# comments

This package allows you to add an attribute to your R objects that can be used to store comments. 
It provides a set of functions to list, add, and delete comments. In addition, text categories can be associated with comments. There is a special category of 'todo' comments which have their own functions to list, add, and delete them.

## Installation

You can install the released version of comments from [github](https://github.com/mandpd/comments) with:

library(devtools)

install_github("mandpd/comments")

## Example

The comments package allows you to add comments to your data sets as you manipulate them, e.g. during your exploratory data analysis phase.
To enable a data set to contain comments, first apply the enotes() function to it. You can optionally add an intial comment, e.g. a summary of the contents of the dataset, or the source of the dataset. Additional notes can be added using anote()

### enotes() - enable an R object to have notes

```{r}
library(comments)
df <- enotes(cars, 'dataset of speed and stopping distances of cars')
df <- anote(df, 'from base package') 
```

This enables the use of anote(), dnote(), and notes() with the cars data.frame

### notes() - list the notes attached to an R object

```{r}
notes(df)
```

### anote() - add a new note to the list attached to an R object

Let's rescale the values in the speed and distance columns to be between 0 and 1, add notes explaining this, and then print out the notes. An individual comment can contain a maximum of 66 characters. If your comment needs to be longer, use the anote function multiple times.

```{r}
rescale_param <- function(x) { (x-min(x)) / (max(x)- min(x))}
df[] <- lapply(df, rescale_param)
df <- anote(df, 'rescaled speed to between 0 and 1')
df <- anote(df, 'rescaled distance to between 0 and 1')
notes(df)
```

### Use with dplyr package

These comments will follow any operations performed on the object, and can be used in conjunction with dplyr pipes (%>%) which provides a fast
way to add notes as you proceed

```{r message=F }
library(dplyr)
df2 <- enotes(cars, 'dataset of speed and stopping distances of cars')
df3 <- df2 %>% 
  anote('added a time variable based on dist / speed') %>%
  mutate(time = dist / speed) %>%
  anote('filtered out dist variable') %>%
  select(-dist)
notes(df3)
```

```{r}
glimpse(df3)
```

### dnote() - delete a note from the list of notes attached to an R object

You can selectively remove comments using the comment id

```{r}
df3 <- dnote(df3,1,confirm = FALSE)
notes(df3)
```

### summary function

Data frames with the commented class will include any comments when summary is run

```{r}
summary(df3)
```

### print function

R objects with the commented class will include any comments when print is run with the 'notes' parameter set to TRUE

```{r}
print(df3[1:5,], notes = T)
```

### timestamps

All notes are entered with a timestamp. You can use the 'showtimestamps' parameter to see these

```{r}
notes(df3, showtimestamps = T)
```

### categories

All notes are entered with a category. This is a text tag of up to 10 characters that can be attached to a comment when it is first added.  You can use the 'showcategories' parameter to see these. By default, a comment is tagged with 'none'.

```{r}
notes(df3, showcategories = T)
```

You can override the default tag when adding a comment by setting the 'category' parameter to your tag value.

```{r}
df3 <- anote(df3, 'the dist values appear skewed', category = 'review')
notes(df3, showcategories = T)
```

### atodo() - add a new todo comment to the list of comments attached to an R object

Todo comments are designed to hold comments on additional tasks or actions to be performed on an R object. An individual todo comment can contain a maximum of 66 characters. If your todo comment needs to be longer, use the atodo function multiple times.

```{r}
df <- atodo(df, 'determine if dist is normally distributed')
```

### todos() - lists the todo comments attached to an R object

```{r}
todos(df)
```

### 'showcategories' parameter
Todo comments appear in the output of notes(). You can use the showcategories parameter to identify which notes are todo notes

```{r}
notes(df, showcategories = T)
```

### dtodo() - delete a todo comment from the list of comments attached to an R object

You can selectively remove comments using the comment id

```{r}
df <- dtodo(df,5,confirm = FALSE)
todos(df)
```

